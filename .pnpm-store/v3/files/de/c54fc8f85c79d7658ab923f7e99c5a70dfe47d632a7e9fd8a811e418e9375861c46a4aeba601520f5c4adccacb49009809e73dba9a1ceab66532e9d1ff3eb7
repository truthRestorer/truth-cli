'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _slicedToArray = function () {function sliceIterator(arr, i) {var _arr = [];var _n = true;var _d = false;var _e = undefined;try {for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {_arr.push(_s.value);if (i && _arr.length === i) break;}} catch (err) {_d = true;_e = err;} finally {try {if (!_n && _i["return"]) _i["return"]();} finally {if (_d) throw _e;}}return _arr;}return function (arr, i) {if (Array.isArray(arr)) {return arr;} else if (Symbol.iterator in Object(arr)) {return sliceIterator(arr, i);} else {throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();exports.

























isAbsolute = isAbsolute;exports.




isBuiltIn = isBuiltIn;exports.






isExternalModule = isExternalModule;exports.






isExternalModuleMain = isExternalModuleMain;exports.

















isScoped = isScoped;exports.




isScopedMain = isScopedMain;exports['default'] =






























































resolveImportType;var _path = require('path');var _resolve = require('eslint-module-utils/resolve');var _resolve2 = _interopRequireDefault(_resolve);var _packagePath = require('./packagePath');var _module = require('module');function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { 'default': obj };}var isCoreModule = function isCoreModule(pkg) {return _module.Module.builtinModules.includes(pkg.startsWith('node:') ? pkg.slice(5) : pkg);};function baseModule(name) {if (isScoped(name)) {var _name$split = name.split('/'),_name$split2 = _slicedToArray(_name$split, 2),scope = _name$split2[0],_pkg = _name$split2[1];return String(scope) + '/' + String(_pkg);}var _name$split3 = name.split('/'),_name$split4 = _slicedToArray(_name$split3, 1),pkg = _name$split4[0];return pkg;}function isInternalRegexMatch(name, settings) {var internalScope = settings && settings['import/internal-regex'];return internalScope && new RegExp(internalScope).test(name);}function isAbsolute(name) {return typeof name === 'string' && (0, _path.isAbsolute)(name);} // path is defined only when a resolver resolves to a non-standard path
function isBuiltIn(name, settings, path) {if (path || !name) {return false;}var base = baseModule(name);var extras = settings && settings['import/core-modules'] || [];return isCoreModule(base) || extras.indexOf(base) > -1;}function isExternalModule(name, path, context) {if (arguments.length < 3) {throw new TypeError('isExternalModule: name, path, and context are all required');}return (isModule(name) || isScoped(name)) && typeTest(name, context, path) === 'external';}function isExternalModuleMain(name, path, context) {if (arguments.length < 3) {throw new TypeError('isExternalModule: name, path, and context are all required');}return isModuleMain(name) && typeTest(name, context, path) === 'external';}var moduleRegExp = /^\w/;function isModule(name) {return name && moduleRegExp.test(name);}var moduleMainRegExp = /^[\w]((?!\/).)*$/;function isModuleMain(name) {return name && moduleMainRegExp.test(name);}var scopedRegExp = /^@[^/]+\/?[^/]+/;function isScoped(name) {return name && scopedRegExp.test(name);}var scopedMainRegExp = /^@[^/]+\/?[^/]+$/;function isScopedMain(name) {return name && scopedMainRegExp.test(name);}function isRelativeToParent(name) {return (/^\.\.$|^\.\.[\\/]/.test(name));}var indexFiles = ['.', './', './index', './index.js'];function isIndex(name) {return indexFiles.indexOf(name) !== -1;}function isRelativeToSibling(name) {return (/^\.[\\/]/.test(name));}function isExternalPath(path, context) {if (!path) {return false;}var settings = context.settings;var packagePath = (0, _packagePath.getContextPackagePath)(context);if ((0, _path.relative)(packagePath, path).startsWith('..')) {return true;}var folders = settings && settings['import/external-module-folders'] || ['node_modules'];return folders.some(function (folder) {var folderPath = (0, _path.resolve)(packagePath, folder);var relativePath = (0, _path.relative)(folderPath, path);return !relativePath.startsWith('..');});}function isInternalPath(path, context) {if (!path) {return false;}var packagePath = (0, _packagePath.getContextPackagePath)(context);return !(0, _path.relative)(packagePath, path).startsWith('../');}function isExternalLookingName(name) {return isModule(name) || isScoped(name);}function typeTest(name, context, path) {var settings = context.settings;if (isInternalRegexMatch(name, settings)) {return 'internal';}if (isAbsolute(name, settings, path)) {return 'absolute';}if (isBuiltIn(name, settings, path)) {return 'builtin';}if (isRelativeToParent(name, settings, path)) {return 'parent';}if (isIndex(name, settings, path)) {return 'index';}if (isRelativeToSibling(name, settings, path)) {return 'sibling';}if (isExternalPath(path, context)) {return 'external';}if (isInternalPath(path, context)) {return 'internal';}if (isExternalLookingName(name)) {return 'external';}return 'unknown';}function resolveImportType(name, context) {return typeTest(name, context, (0, _resolve2['default'])(name, context));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL2ltcG9ydFR5cGUuanMiXSwibmFtZXMiOlsiaXNBYnNvbHV0ZSIsImlzQnVpbHRJbiIsImlzRXh0ZXJuYWxNb2R1bGUiLCJpc0V4dGVybmFsTW9kdWxlTWFpbiIsImlzU2NvcGVkIiwiaXNTY29wZWRNYWluIiwicmVzb2x2ZUltcG9ydFR5cGUiLCJpc0NvcmVNb2R1bGUiLCJwa2ciLCJNb2R1bGUiLCJidWlsdGluTW9kdWxlcyIsImluY2x1ZGVzIiwic3RhcnRzV2l0aCIsInNsaWNlIiwiYmFzZU1vZHVsZSIsIm5hbWUiLCJzcGxpdCIsInNjb3BlIiwiaXNJbnRlcm5hbFJlZ2V4TWF0Y2giLCJzZXR0aW5ncyIsImludGVybmFsU2NvcGUiLCJSZWdFeHAiLCJ0ZXN0IiwicGF0aCIsImJhc2UiLCJleHRyYXMiLCJpbmRleE9mIiwiY29udGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsIlR5cGVFcnJvciIsImlzTW9kdWxlIiwidHlwZVRlc3QiLCJpc01vZHVsZU1haW4iLCJtb2R1bGVSZWdFeHAiLCJtb2R1bGVNYWluUmVnRXhwIiwic2NvcGVkUmVnRXhwIiwic2NvcGVkTWFpblJlZ0V4cCIsImlzUmVsYXRpdmVUb1BhcmVudCIsImluZGV4RmlsZXMiLCJpc0luZGV4IiwiaXNSZWxhdGl2ZVRvU2libGluZyIsImlzRXh0ZXJuYWxQYXRoIiwicGFja2FnZVBhdGgiLCJmb2xkZXJzIiwic29tZSIsImZvbGRlciIsImZvbGRlclBhdGgiLCJyZWxhdGl2ZVBhdGgiLCJpc0ludGVybmFsUGF0aCIsImlzRXh0ZXJuYWxMb29raW5nTmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQmdCQSxVLEdBQUFBLFU7Ozs7O0FBS0FDLFMsR0FBQUEsUzs7Ozs7OztBQU9BQyxnQixHQUFBQSxnQjs7Ozs7OztBQU9BQyxvQixHQUFBQSxvQjs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBQyxRLEdBQUFBLFE7Ozs7O0FBS0FD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TyxRQUFQLENBQWtCLENBQ2xFLElBQUlpQixRQUFRekIsSUFBUixFQUFjSSxRQUFkLEVBQXdCSSxJQUF4QixDQUFKLEVBQW1DLENBQUUsT0FBTyxPQUFQLENBQWlCLENBQ3RELElBQUlrQixvQkFBb0IxQixJQUFwQixFQUEwQkksUUFBMUIsRUFBb0NJLElBQXBDLENBQUosRUFBK0MsQ0FBRSxPQUFPLFNBQVAsQ0FBbUIsQ0FDcEUsSUFBSW1CLGVBQWVuQixJQUFmLEVBQXFCSSxPQUFyQixDQUFKLEVBQW1DLENBQUUsT0FBTyxVQUFQLENBQW9CLENBQ3pELElBQUlzQixlQUFlMUIsSUFBZixFQUFxQkksT0FBckIsQ0FBSixFQUFtQyxDQUFFLE9BQU8sVUFBUCxDQUFvQixDQUN6RCxJQUFJdUIsc0JBQXNCbkMsSUFBdEIsQ0FBSixFQUFpQyxDQUFFLE9BQU8sVUFBUCxDQUFvQixDQUN2RCxPQUFPLFNBQVAsQ0FDRCxDQUVjLFNBQVNULGlCQUFULENBQTJCUyxJQUEzQixFQUFpQ1ksT0FBakMsRUFBMEMsQ0FDdkQsT0FBT0ssU0FBU2pCLElBQVQsRUFBZVksT0FBZixFQUF3QiwwQkFBUVosSUFBUixFQUFjWSxPQUFkLENBQXhCLENBQVA7QUFDRCIsImZpbGUiOiJpbXBvcnRUeXBlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNBYnNvbHV0ZSBhcyBub2RlSXNBYnNvbHV0ZSwgcmVsYXRpdmUsIHJlc29sdmUgYXMgbm9kZVJlc29sdmUgfSBmcm9tICdwYXRoJztcblxuaW1wb3J0IHJlc29sdmUgZnJvbSAnZXNsaW50LW1vZHVsZS11dGlscy9yZXNvbHZlJztcbmltcG9ydCB7IGdldENvbnRleHRQYWNrYWdlUGF0aCB9IGZyb20gJy4vcGFja2FnZVBhdGgnO1xuaW1wb3J0IHsgTW9kdWxlIH0gZnJvbSAnbW9kdWxlJztcblxuY29uc3QgaXNDb3JlTW9kdWxlID0gKHBrZykgPT4gTW9kdWxlLmJ1aWx0aW5Nb2R1bGVzLmluY2x1ZGVzKFxuICBwa2cuc3RhcnRzV2l0aCgnbm9kZTonKVxuICAgID8gcGtnLnNsaWNlKDUpXG4gICAgOiBwa2csXG4pO1xuXG5mdW5jdGlvbiBiYXNlTW9kdWxlKG5hbWUpIHtcbiAgaWYgKGlzU2NvcGVkKG5hbWUpKSB7XG4gICAgY29uc3QgW3Njb3BlLCBwa2ddID0gbmFtZS5zcGxpdCgnLycpO1xuICAgIHJldHVybiBgJHtzY29wZX0vJHtwa2d9YDtcbiAgfVxuICBjb25zdCBbcGtnXSA9IG5hbWUuc3BsaXQoJy8nKTtcbiAgcmV0dXJuIHBrZztcbn1cblxuZnVuY3Rpb24gaXNJbnRlcm5hbFJlZ2V4TWF0Y2gobmFtZSwgc2V0dGluZ3MpIHtcbiAgY29uc3QgaW50ZXJuYWxTY29wZSA9IHNldHRpbmdzICYmIHNldHRpbmdzWydpbXBvcnQvaW50ZXJuYWwtcmVnZXgnXTtcbiAgcmV0dXJuIGludGVybmFsU2NvcGUgJiYgbmV3IFJlZ0V4cChpbnRlcm5hbFNjb3BlKS50ZXN0KG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBYnNvbHV0ZShuYW1lKSB7XG4gIHJldHVybiB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgJiYgbm9kZUlzQWJzb2x1dGUobmFtZSk7XG59XG5cbi8vIHBhdGggaXMgZGVmaW5lZCBvbmx5IHdoZW4gYSByZXNvbHZlciByZXNvbHZlcyB0byBhIG5vbi1zdGFuZGFyZCBwYXRoXG5leHBvcnQgZnVuY3Rpb24gaXNCdWlsdEluKG5hbWUsIHNldHRpbmdzLCBwYXRoKSB7XG4gIGlmIChwYXRoIHx8ICFuYW1lKSB7IHJldHVybiBmYWxzZTsgfVxuICBjb25zdCBiYXNlID0gYmFzZU1vZHVsZShuYW1lKTtcbiAgY29uc3QgZXh0cmFzID0gc2V0dGluZ3MgJiYgc2V0dGluZ3NbJ2ltcG9ydC9jb3JlLW1vZHVsZXMnXSB8fCBbXTtcbiAgcmV0dXJuIGlzQ29yZU1vZHVsZShiYXNlKSB8fCBleHRyYXMuaW5kZXhPZihiYXNlKSA+IC0xO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFeHRlcm5hbE1vZHVsZShuYW1lLCBwYXRoLCBjb250ZXh0KSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2lzRXh0ZXJuYWxNb2R1bGU6IG5hbWUsIHBhdGgsIGFuZCBjb250ZXh0IGFyZSBhbGwgcmVxdWlyZWQnKTtcbiAgfVxuICByZXR1cm4gKGlzTW9kdWxlKG5hbWUpIHx8IGlzU2NvcGVkKG5hbWUpKSAmJiB0eXBlVGVzdChuYW1lLCBjb250ZXh0LCBwYXRoKSA9PT0gJ2V4dGVybmFsJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXh0ZXJuYWxNb2R1bGVNYWluKG5hbWUsIHBhdGgsIGNvbnRleHQpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaXNFeHRlcm5hbE1vZHVsZTogbmFtZSwgcGF0aCwgYW5kIGNvbnRleHQgYXJlIGFsbCByZXF1aXJlZCcpO1xuICB9XG4gIHJldHVybiBpc01vZHVsZU1haW4obmFtZSkgJiYgdHlwZVRlc3QobmFtZSwgY29udGV4dCwgcGF0aCkgPT09ICdleHRlcm5hbCc7XG59XG5cbmNvbnN0IG1vZHVsZVJlZ0V4cCA9IC9eXFx3LztcbmZ1bmN0aW9uIGlzTW9kdWxlKG5hbWUpIHtcbiAgcmV0dXJuIG5hbWUgJiYgbW9kdWxlUmVnRXhwLnRlc3QobmFtZSk7XG59XG5cbmNvbnN0IG1vZHVsZU1haW5SZWdFeHAgPSAvXltcXHddKCg/IVxcLykuKSokLztcbmZ1bmN0aW9uIGlzTW9kdWxlTWFpbihuYW1lKSB7XG4gIHJldHVybiBuYW1lICYmIG1vZHVsZU1haW5SZWdFeHAudGVzdChuYW1lKTtcbn1cblxuY29uc3Qgc2NvcGVkUmVnRXhwID0gL15AW14vXStcXC8/W14vXSsvO1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2NvcGVkKG5hbWUpIHtcbiAgcmV0dXJuIG5hbWUgJiYgc2NvcGVkUmVnRXhwLnRlc3QobmFtZSk7XG59XG5cbmNvbnN0IHNjb3BlZE1haW5SZWdFeHAgPSAvXkBbXi9dK1xcLz9bXi9dKyQvO1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2NvcGVkTWFpbihuYW1lKSB7XG4gIHJldHVybiBuYW1lICYmIHNjb3BlZE1haW5SZWdFeHAudGVzdChuYW1lKTtcbn1cblxuZnVuY3Rpb24gaXNSZWxhdGl2ZVRvUGFyZW50KG5hbWUpIHtcbiAgcmV0dXJuICgvXlxcLlxcLiR8XlxcLlxcLltcXFxcL10vKS50ZXN0KG5hbWUpO1xufVxuXG5jb25zdCBpbmRleEZpbGVzID0gWycuJywgJy4vJywgJy4vaW5kZXgnLCAnLi9pbmRleC5qcyddO1xuZnVuY3Rpb24gaXNJbmRleChuYW1lKSB7XG4gIHJldHVybiBpbmRleEZpbGVzLmluZGV4T2YobmFtZSkgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBpc1JlbGF0aXZlVG9TaWJsaW5nKG5hbWUpIHtcbiAgcmV0dXJuICgvXlxcLltcXFxcL10vKS50ZXN0KG5hbWUpO1xufVxuXG5mdW5jdGlvbiBpc0V4dGVybmFsUGF0aChwYXRoLCBjb250ZXh0KSB7XG4gIGlmICghcGF0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IHsgc2V0dGluZ3MgfSA9IGNvbnRleHQ7XG4gIGNvbnN0IHBhY2thZ2VQYXRoID0gZ2V0Q29udGV4dFBhY2thZ2VQYXRoKGNvbnRleHQpO1xuXG4gIGlmIChyZWxhdGl2ZShwYWNrYWdlUGF0aCwgcGF0aCkuc3RhcnRzV2l0aCgnLi4nKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3QgZm9sZGVycyA9IHNldHRpbmdzICYmIHNldHRpbmdzWydpbXBvcnQvZXh0ZXJuYWwtbW9kdWxlLWZvbGRlcnMnXSB8fCBbJ25vZGVfbW9kdWxlcyddO1xuICByZXR1cm4gZm9sZGVycy5zb21lKChmb2xkZXIpID0+IHtcbiAgICBjb25zdCBmb2xkZXJQYXRoID0gbm9kZVJlc29sdmUocGFja2FnZVBhdGgsIGZvbGRlcik7XG4gICAgY29uc3QgcmVsYXRpdmVQYXRoID0gcmVsYXRpdmUoZm9sZGVyUGF0aCwgcGF0aCk7XG4gICAgcmV0dXJuICFyZWxhdGl2ZVBhdGguc3RhcnRzV2l0aCgnLi4nKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGlzSW50ZXJuYWxQYXRoKHBhdGgsIGNvbnRleHQpIHtcbiAgaWYgKCFwYXRoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHBhY2thZ2VQYXRoID0gZ2V0Q29udGV4dFBhY2thZ2VQYXRoKGNvbnRleHQpO1xuICByZXR1cm4gIXJlbGF0aXZlKHBhY2thZ2VQYXRoLCBwYXRoKS5zdGFydHNXaXRoKCcuLi8nKTtcbn1cblxuZnVuY3Rpb24gaXNFeHRlcm5hbExvb2tpbmdOYW1lKG5hbWUpIHtcbiAgcmV0dXJuIGlzTW9kdWxlKG5hbWUpIHx8IGlzU2NvcGVkKG5hbWUpO1xufVxuXG5mdW5jdGlvbiB0eXBlVGVzdChuYW1lLCBjb250ZXh0LCBwYXRoKSB7XG4gIGNvbnN0IHsgc2V0dGluZ3MgfSA9IGNvbnRleHQ7XG4gIGlmIChpc0ludGVybmFsUmVnZXhNYXRjaChuYW1lLCBzZXR0aW5ncykpIHsgcmV0dXJuICdpbnRlcm5hbCc7IH1cbiAgaWYgKGlzQWJzb2x1dGUobmFtZSwgc2V0dGluZ3MsIHBhdGgpKSB7IHJldHVybiAnYWJzb2x1dGUnOyB9XG4gIGlmIChpc0J1aWx0SW4obmFtZSwgc2V0dGluZ3MsIHBhdGgpKSB7IHJldHVybiAnYnVpbHRpbic7IH1cbiAgaWYgKGlzUmVsYXRpdmVUb1BhcmVudChuYW1lLCBzZXR0aW5ncywgcGF0aCkpIHsgcmV0dXJuICdwYXJlbnQnOyB9XG4gIGlmIChpc0luZGV4KG5hbWUsIHNldHRpbmdzLCBwYXRoKSkgeyByZXR1cm4gJ2luZGV4JzsgfVxuICBpZiAoaXNSZWxhdGl2ZVRvU2libGluZyhuYW1lLCBzZXR0aW5ncywgcGF0aCkpIHsgcmV0dXJuICdzaWJsaW5nJzsgfVxuICBpZiAoaXNFeHRlcm5hbFBhdGgocGF0aCwgY29udGV4dCkpIHsgcmV0dXJuICdleHRlcm5hbCc7IH1cbiAgaWYgKGlzSW50ZXJuYWxQYXRoKHBhdGgsIGNvbnRleHQpKSB7IHJldHVybiAnaW50ZXJuYWwnOyB9XG4gIGlmIChpc0V4dGVybmFsTG9va2luZ05hbWUobmFtZSkpIHsgcmV0dXJuICdleHRlcm5hbCc7IH1cbiAgcmV0dXJuICd1bmtub3duJztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVzb2x2ZUltcG9ydFR5cGUobmFtZSwgY29udGV4dCkge1xuICByZXR1cm4gdHlwZVRlc3QobmFtZSwgY29udGV4dCwgcmVzb2x2ZShuYW1lLCBjb250ZXh0KSk7XG59XG4iXX0=